<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TBC Service Manager</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone@7.22.20/babel.min.js"></script>

    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.344.0?external=react,react-dom",
            "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2"
        }
    }
    </script>
    <style>
        body { background-color: #f8fafc; font-family: sans-serif; }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        /* 自定義滾動條 */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module" data-presets="react">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Users, UserPlus, Search, Edit2, Trash2, Save, X, AlertCircle, 
            CheckCircle2, Clock, CalendarX, ShieldCheck, ChevronRight 
        } from 'lucide-react';
        import { createClient } from '@supabase/supabase-js';

        // --- Supabase 連線設定 ---
        const SUPABASE_URL = "https://jcepavwocdujoeoqxvsd.supabase.co";
        const SUPABASE_KEY = "sb_publishable_Tj2n8e3yY1HyvaFzXRyO_w_PWrVFB7E"; 
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        // --- 預設資料結構 ---
        const DEFAULT_MEMBER = {
            name: '',
            preferred_session: '皆可',
            availability_status: '穩定服事',
            dual_service_pref: 0, // 0: 無, 1: 同崗位, 2: 不同崗位
            group_id: '',
            unavailable_dates: [] // array of strings (YYYY-MM-DD)
        };

        const SESSION_OPTIONS = ['第一堂', '第二堂', '皆可'];
        const STATUS_OPTIONS = ['穩定服事', '暫停服事', '安息季'];

        function App() {
            const [members, setMembers] = useState([]);
            const [positions, setPositions] = useState([]);
            const [memberPositions, setMemberPositions] = useState([]);
            
            const [isLoading, setIsLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [message, setMessage] = useState({ type: '', text: '' });

            // 取得目前已存在的所有不重複群組 ID
            const existingGroupIds = [...new Set(members.map(m => m.group_id).filter(Boolean))].sort();

            // Modal 狀態
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingMember, setEditingMember] = useState(null); // null 表示新增
            const [formData, setFormData] = useState({ ...DEFAULT_MEMBER });
            const [formPositions, setFormPositions] = useState({}); // { [posId]: 'active' | 'inactive' }
            const [newDateInput, setNewDateInput] = useState('');

            // 1. 載入資料庫
            const loadData = async () => {
                setIsLoading(true);
                try {
                    const [
                        { data: membersData, error: mErr },
                        { data: positionsData, error: pErr },
                        { data: memberPosData, error: mpErr }
                    ] = await Promise.all([
                        supabase.from('members').select('*').order('name'),
                        supabase.from('positions').select('*').order('id'),
                        supabase.from('member_positions').select('*')
                    ]);

                    if (mErr) throw mErr;
                    if (pErr) throw pErr;
                    if (mpErr) throw mpErr;

                    setMembers(membersData || []);
                    setPositions(positionsData || []);
                    setMemberPositions(memberPosData || []);
                } catch (err) {
                    console.error(err);
                    showMessage('error', '載入資料失敗，請確認連線或無資料表。');
                } finally {
                    setIsLoading(false);
                }
            };

            useEffect(() => { loadData(); }, []);

            const showMessage = (type, text) => {
                setMessage({ type, text });
                setTimeout(() => setMessage({ type: '', text: '' }), 3000);
            };

            // 2. 表單處理 (開啟新增/編輯)
            const openAddModal = () => {
                setEditingMember(null);
                setFormData({ ...DEFAULT_MEMBER });
                setFormPositions({});
                setIsModalOpen(true);
            };

            const openEditModal = (member) => {
                setEditingMember(member);
                setFormData({ ...member, unavailable_dates: member.unavailable_dates || [] });
                
                // 找出該同工擁有的崗位 ID 與排班狀態
                const posMap = {};
                memberPositions
                    .filter(mp => mp.member_id === member.id)
                    .forEach(mp => {
                        // 如果舊資料沒有 is_active 欄位，預設視為 active
                        posMap[mp.position_id] = mp.is_active !== false ? 'active' : 'inactive';
                    });
                setFormPositions(posMap);
                
                setIsModalOpen(true);
            };

            const closeModal = () => {
                setIsModalOpen(false);
                setEditingMember(null);
                setFormData({ ...DEFAULT_MEMBER });
                setNewDateInput('');
            };

            // 處理請假日期
            const addUnavailableDate = () => {
                if (newDateInput && !formData.unavailable_dates.includes(newDateInput)) {
                    setFormData({ ...formData, unavailable_dates: [...formData.unavailable_dates, newDateInput].sort() });
                    setNewDateInput('');
                }
            };
            const removeUnavailableDate = (dateToRemove) => {
                setFormData({ ...formData, unavailable_dates: formData.unavailable_dates.filter(d => d !== dateToRemove) });
            };

            // 處理崗位切換 (三段式：未選 -> 正常 -> 暫停 -> 未選)
            const togglePosition = (posId) => {
                setFormPositions(prev => {
                    const currentStatus = prev[posId];
                    if (!currentStatus) return { ...prev, [posId]: 'active' };
                    if (currentStatus === 'active') return { ...prev, [posId]: 'inactive' };
                    const newState = { ...prev };
                    delete newState[posId];
                    return newState;
                });
            };

            // 3. 儲存至資料庫 (新增或更新)
            const handleSave = async () => {
                if (!formData.name || !formData.name.trim()) return showMessage('error', '姓名不可為空！');
                
                setIsLoading(true);
                try {
                    let memberId = editingMember ? editingMember.id : null;

                    // 步驟 A: 處理 members 表
                    const memberPayload = {
                        name: formData.name.trim(),
                        preferred_session: formData.preferred_session,
                        availability_status: formData.availability_status,
                        dual_service_pref: parseInt(formData.dual_service_pref),
                        group_id: (formData.group_id || '').trim().toUpperCase(), // 加入 || '' 防止 null 報錯
                        unavailable_dates: formData.unavailable_dates || []
                    };

                    if (memberId) {
                        // 更新
                        const { error } = await supabase.from('members').update(memberPayload).eq('id', memberId);
                        if (error) throw error;
                    } else {
                        // 新增
                        const { data, error } = await supabase.from('members').insert(memberPayload).select();
                        if (error) throw error;
                        memberId = data[0].id;
                    }

                    // 步驟 B: 處理 member_positions 關聯表 (全刪除後重建)
                    if (memberId) {
                        const { error: delErr } = await supabase.from('member_positions').delete().eq('member_id', memberId);
                        // 如果因為 RLS 權限失敗，直接拋出錯誤，避免後續重複 Insert 導致無效儲存
                        if (delErr) throw delErr;

                        const posKeys = Object.keys(formPositions);
                        if (posKeys.length > 0) {
                            const insertPosPayload = posKeys.map(pid => ({ 
                                member_id: memberId, 
                                position_id: parseInt(pid),
                                is_active: formPositions[pid] === 'active'
                            }));
                            const { error: insErr } = await supabase.from('member_positions').insert(insertPosPayload);
                            if (insErr) throw insErr;
                        }
                    }

                    showMessage('success', editingMember ? '更新成功！' : '新增成功！');
                    closeModal();
                    loadData(); // 重新整理列表
                } catch (err) {
                    console.error("儲存發生錯誤:", err);
                    showMessage('error', '儲存失敗，請檢查 Supabase 的 Update/Delete 權限。');
                } finally {
                    setIsLoading(false);
                }
            };

            // 4. 刪除同工
            const handleDelete = async (id, name) => {
                if (!window.confirm(`確定要刪除同工「${name}」嗎？\n注意：這會連帶刪除他所有的排班紀錄！`)) return;
                
                setIsLoading(true);
                try {
                    const { error } = await supabase.from('members').delete().eq('id', id);
                    if (error) throw error;
                    showMessage('success', '已刪除同工資料。');
                    loadData();
                } catch (err) {
                    console.error(err);
                    showMessage('error', '刪除失敗，請檢查權限。');
                } finally {
                    setIsLoading(false);
                }
            };

            // 過濾搜尋
            const filteredMembers = members.filter(m => 
                m.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                (m.group_id && m.group_id.toLowerCase().includes(searchTerm.toLowerCase()))
            );

            return (
                <div className="min-h-screen bg-slate-50 flex flex-col">
                    {/* 頂部導覽列 */}
                    <nav className="bg-white sticky top-0 z-40 border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm">
                        <div className="flex items-center gap-3">
                            <div className="bg-indigo-600 p-2 rounded-xl text-white">
                                <Users size={24} />
                            </div>
                            <div>
                                <h1 className="text-xl font-black text-slate-800">TBC Service Manager</h1>
                            </div>
                        </div>
                        <button onClick={openAddModal} className="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-xl flex items-center gap-2 shadow-sm transition-all active:scale-95">
                            <UserPlus size={18} /> <span className="hidden sm:inline">新增同工</span>
                        </button>
                    </nav>

                    {/* 提示訊息 */}
                    {message.text && (
                        <div className={`fixed top-20 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-full font-bold shadow-lg animate-fade-in flex items-center gap-2 ${message.type === 'success' ? 'bg-emerald-500 text-white' : 'bg-red-500 text-white'}`}>
                            {message.type === 'success' ? <CheckCircle2 size={18}/> : <AlertCircle size={18}/>}
                            {message.text}
                        </div>
                    )}

                    <main className="flex-grow p-6 max-w-6xl mx-auto w-full">
                        {/* 搜尋列 */}
                        <div className="bg-white p-2 rounded-2xl shadow-sm border border-slate-200 mb-6 flex items-center relative">
                            <Search className="absolute left-6 text-slate-400" size={20} />
                            <input 
                                type="text" 
                                placeholder="搜尋姓名或群組 (例如: FA)..." 
                                value={searchTerm}
                                onChange={e => setSearchTerm(e.target.value)}
                                className="w-full pl-12 pr-4 py-3 bg-transparent outline-none font-bold text-slate-700"
                            />
                        </div>

                        {/* 同工列表 (卡片網格) */}
                        {isLoading && members.length === 0 ? (
                            <div className="text-center py-20 text-slate-400 font-bold animate-pulse">載入資料庫中...</div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredMembers.map(member => {
                                    const ownedPosList = memberPositions
                                        .filter(mp => mp.member_id === member.id)
                                        .map(mp => {
                                            const p = positions.find(pos => pos.id === mp.position_id);
                                            return p ? { name: p.name, isActive: mp.is_active !== false } : null;
                                        })
                                        .filter(Boolean);

                                    return (
                                        <div key={member.id} className="bg-white rounded-[1.5rem] p-6 shadow-sm border border-slate-200 hover:shadow-md transition-shadow">
                                            <div className="flex justify-between items-start mb-4">
                                                <div className="flex items-center gap-3">
                                                    <div>
                                                        <h3 className="text-xl font-black text-slate-800 flex items-center gap-2">
                                                            {member.name}
                                                            {member.group_id && <span className="text-[10px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded border border-indigo-100">{member.group_id}</span>}
                                                        </h3>
                                                        <div className="flex items-center gap-1 text-xs font-bold mt-1">
                                                            <span className={member.availability_status === '穩定服事' ? 'text-emerald-500' : 'text-orange-500'}>● {member.availability_status}</span>
                                                            <span className="text-slate-300">|</span>
                                                            <span className="text-slate-500">{member.preferred_session}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div className="flex gap-2">
                                                    <button onClick={() => openEditModal(member)} className="p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-lg transition-colors"><Edit2 size={16}/></button>
                                                    <button onClick={() => handleDelete(member.id, member.name)} className="p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-lg transition-colors"><Trash2 size={16}/></button>
                                                </div>
                                            </div>

                                            <div className="space-y-3">
                                                <div className="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                                    <p className="text-[10px] font-bold text-slate-400 mb-1 flex items-center gap-1"><ShieldCheck size={12}/> 服事資格 ({ownedPosList.length})</p>
                                                    <div className="flex flex-wrap gap-1">
                                                        {ownedPosList.length > 0 ? ownedPosList.map(p => (
                                                            <span key={p.name} className={`text-[10px] font-bold px-2 py-1 rounded-md border ${p.isActive ? 'bg-white border-slate-200 text-slate-600' : 'bg-slate-50 border-slate-200 border-dashed text-slate-400'}`}>
                                                                {p.name} {!p.isActive && <span className="text-slate-400">(暫停)</span>}
                                                            </span>
                                                        )) : <span className="text-xs text-slate-400">尚未設定</span>}
                                                    </div>
                                                </div>
                                                
                                                {(member.unavailable_dates && member.unavailable_dates.length > 0) && (
                                                    <div className="bg-orange-50/50 p-3 rounded-xl border border-orange-100">
                                                        <p className="text-[10px] font-bold text-orange-400 mb-1 flex items-center gap-1"><CalendarX size={12}/> 請假日期 ({member.unavailable_dates.length})</p>
                                                        <div className="flex flex-wrap gap-1">
                                                            {member.unavailable_dates.map(d => (
                                                                <span key={d} className="text-[10px] font-bold bg-white text-orange-600 px-1.5 py-0.5 rounded border border-orange-200">{d}</span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                        
                        {!isLoading && filteredMembers.length === 0 && (
                            <div className="text-center py-20 text-slate-400 font-bold">找不到符合的同工資料</div>
                        )}
                    </main>

                    {/* 新增/編輯 Modal */}
                    {isModalOpen && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in overflow-y-auto">
                            <div className="bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden my-auto max-h-[90vh] flex flex-col">
                                <div className="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 shrink-0">
                                    <h2 className="text-xl font-black text-slate-800 flex items-center gap-2">
                                        {editingMember ? <Edit2 size={20} className="text-indigo-600"/> : <UserPlus size={20} className="text-indigo-600"/>}
                                        {editingMember ? '編輯同工資料' : '新增同工'}
                                    </h2>
                                    <button onClick={closeModal} className="p-2 hover:bg-slate-200 rounded-full text-slate-500 transition-colors"><X size={20}/></button>
                                </div>
                                
                                <div className="p-6 space-y-6 overflow-y-auto">
                                    {/* 基本資料區塊 */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">姓名 <span className="text-red-500">*</span></label>
                                            <input 
                                                type="text" 
                                                value={formData.name} 
                                                onChange={e => setFormData({...formData, name: e.target.value})} 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all font-semibold text-slate-700"
                                                placeholder="請輸入姓名"
                                            />
                                        </div>
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">群組 ID<span className="text-slate-400 font-normal">(選填)</span></label>
                                            <input 
                                                type="text" 
                                                value={formData.group_id} 
                                                onChange={e => setFormData({...formData, group_id: e.target.value})} 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all font-semibold text-slate-700 uppercase"
                                                placeholder="例如：FA、FB"
                                            />
                                            {existingGroupIds.length > 0 && (
                                                <p className="text-[10px] text-slate-400 font-semibold leading-relaxed">
                                                    現有群組：<span className="text-indigo-400">{existingGroupIds.join(', ')}</span>
                                                </p>
                                            )}
                                        </div>
                                    </div>

                                    {/* 意願與狀態區塊 */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">服事意願</label>
                                            <select 
                                                value={formData.availability_status} 
                                                onChange={e => setFormData({...formData, availability_status: e.target.value})} 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all font-semibold text-slate-700 cursor-pointer"
                                            >
                                                {STATUS_OPTIONS.map(opt => (
                                                    <option key={opt} value={opt}>{opt}</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">偏好堂別</label>
                                            <select 
                                                value={formData.preferred_session} 
                                                onChange={e => setFormData({...formData, preferred_session: e.target.value})} 
                                                className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all font-semibold text-slate-700 cursor-pointer"
                                            >
                                                {SESSION_OPTIONS.map(opt => (
                                                    <option key={opt} value={opt}>{opt}</option>
                                                ))}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="space-y-2">
                                        <label className="text-xs font-bold text-slate-500 uppercase tracking-wider">同日二堂服事</label>
                                        <select 
                                            value={formData.dual_service_pref} 
                                            onChange={e => setFormData({...formData, dual_service_pref: e.target.value})} 
                                            className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all font-semibold text-slate-700 cursor-pointer"
                                        >
                                            <option value="0">無</option>
                                            <option value="1">同崗位</option>
                                            <option value="2">不同崗位</option>
                                        </select>
                                    </div>

                                    {/* 服事資格選擇 */}
                                    <div className="pt-4 border-t border-slate-100">
                                        <label className="text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-1.5 mb-1">
                                            <ShieldCheck size={16} className="text-indigo-500"/> 服事崗位資格
                                        </label>
                                        <p className="text-[10px] text-slate-400 mb-3 ml-5">提示：連續點擊按鈕可切換「正常」或「暫停」狀態</p>
                                        <div className="flex flex-wrap gap-2">
                                            {positions.length === 0 && <span className="text-sm text-slate-400">系統尚未建立崗位資料。</span>}
                                            {positions.map(pos => {
                                                const status = formPositions[pos.id];
                                                
                                                // 無資格 (未選取) - 淺灰底色、淺灰字
                                                let btnStyle = 'bg-slate-100 border-slate-100 text-slate-400 hover:bg-slate-200'; 
                                                
                                                if (status === 'active') {
                                                    // 有資格且正常
                                                    btnStyle = 'bg-indigo-50 border-indigo-500 text-indigo-700 shadow-sm';
                                                } else if (status === 'inactive') {
                                                    // 有資格但暫停
                                                    btnStyle = 'bg-white border-slate-400 text-slate-600 border-dashed shadow-sm';
                                                }
                                                
                                                return (
                                                    <button
                                                        key={pos.id}
                                                        onClick={() => togglePosition(pos.id)}
                                                        className={`px-3 py-2 rounded-xl text-sm font-bold transition-all border-2 flex items-center gap-1.5 ${btnStyle}`}
                                                    >
                                                        {pos.name}
                                                        {status === 'active' && <span className="text-[10px] bg-indigo-100 text-indigo-600 px-1.5 py-0.5 rounded">正常</span>}
                                                        {status === 'inactive' && <span className="text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded">暫停</span>}
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    {/* 請假日期設定 */}
                                    <div className="pt-4 border-t border-slate-100 pb-2">
                                        <label className="text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-1.5 mb-3">
                                            <CalendarX size={16} className="text-orange-500"/> 請假 / 不可排班日期
                                        </label>
                                        <div className="flex gap-2 mb-3">
                                            <input 
                                                type="date" 
                                                value={newDateInput} 
                                                onChange={e => setNewDateInput(e.target.value)} 
                                                className="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-2.5 outline-none focus:border-orange-400 focus:ring-2 focus:ring-orange-100 transition-all font-semibold text-slate-700"
                                            />
                                            <button 
                                                onClick={addUnavailableDate} 
                                                className="bg-orange-100 hover:bg-orange-200 text-orange-700 font-bold px-4 py-2.5 rounded-xl transition-colors active:scale-95"
                                            >
                                                加入日期
                                            </button>
                                        </div>
                                        
                                        <div className="flex flex-wrap gap-2">
                                            {formData.unavailable_dates.length === 0 && <span className="text-sm text-slate-400">目前無請假紀錄。</span>}
                                            {formData.unavailable_dates.map(date => (
                                                <div key={date} className="bg-white border border-orange-200 text-orange-600 pl-3 pr-1 py-1.5 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm">
                                                    {date}
                                                    <button 
                                                        onClick={() => removeUnavailableDate(date)} 
                                                        className="p-1 hover:bg-orange-100 rounded-md text-orange-400 hover:text-orange-700 transition-colors"
                                                    >
                                                        <X size={14}/>
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                                
                                {/* 底部按鈕區 */}
                                <div className="px-6 py-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-3 shrink-0">
                                    <button 
                                        onClick={closeModal} 
                                        className="px-5 py-2.5 rounded-xl font-bold text-slate-600 hover:bg-slate-200 transition-colors"
                                    >
                                        取消
                                    </button>
                                    <button 
                                        onClick={handleSave} 
                                        disabled={isLoading} 
                                        className="bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white px-6 py-2.5 rounded-xl font-bold flex items-center gap-2 shadow-md transition-all active:scale-95"
                                    >
                                        <Save size={18}/> 
                                        {isLoading ? '儲存中...' : '儲存設定'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
